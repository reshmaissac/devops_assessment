<!DOCTYPE html>
<html>

<head>
	<title>Results</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" />
	<!-- jQuery -->
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

	<!-- Bootstrap JavaScript -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>

	<link th:href="@{/css/styles.css}" rel="stylesheet">
</head>

<body>
	<!-- Header -->
	<div th:replace="header :: header"></div>

	<h2>Your Results</h2>


	<div id="results-panel" th:if="${response}">

		<!-- Add more code to display other response details -->
		<div id="maturity-panel">
			<!-- Progress bar -->

			<!--			<div class="progress-bar">-->
			<!--				<div th:style="'width:' + ${response.maturityPercent} + '%'"-->
			<!--					th:class="'progress-bar-fill ' + ${response.maturityLevel.name().toLowerCase()}">-->
			<!--				</div>-->
			<!--			</div>-->

			<!-- Progress bar -->
			<div class="progress">
				<div class="progress-bar progress-bar-fill" th:style="'width:' + ${response.maturityPercent} + '%'"
					th:class="'progress-bar-fill ' + ${response.maturityLevel.name().toLowerCase()}">
					<span th:text="${response.maturityPercent} + '%'"></span>
				</div>
			</div>





			<!-- Compact and attractive display of Maturity Percentage and Level -->
			<div class="d-flex justify-content-between align-items-center">
				<div class="p-2">
					<h6 class="mb-0">Maturity Percentage:</h6>
					<span class="badge badge-primary" th:text="${response.maturityPercent} + '%'">Maturity
						Percent</span>
				</div>
				<div class="p-2">
					<h6 class="mb-0">Maturity Level:</h6>
					<span class="badge badge-success" th:text="${response.maturityLevel.name()}">Maturity Level</span>
				</div>
			</div>

		</div>


		<!-- Display gap areas -->
		<div class="card">
			<h5 class="card-header">Whats Next? </h5>
			<div class="card-body">
				<h5 class="card-title">Focus on below areas</h5>
				<p class="card-text">Below are your gap areas. Click to access specially selected online tutorials
					that
					help
					implement DevOps tools and practices to bridge these gaps and improve your maturity level.
					Implement them! Return for a reassessment to see your progress rise! </p>


				<ul>
					<li th:each="gapArea, iterStat : ${response.gapAreas}" class="list-item">
						<span class="clickable-area expansion-indicator" th:text="${gapArea}"
							th:data-index="${iterStat.index}"></span>
						<ul class="sublist" th:id="'sublist' + ${iterStat.index}" style="display: none;">
							<li>Details for Gap Area: <span th:text="${gapArea}"></span></li>
							<!-- Add more details here -->
						</ul>
					</li>
				</ul>


			</div>
		</div>



		<div th:unless="${response}">
			<p>No matching response found.</p>
			<!-- You can add a link to redirect to the home page or a different page here -->
			<a href="/">Back to Home</a>
		</div>
		<!-- Footer -->
		<div th:replace="footer :: footer"></div>

		<!-- JavaScript to toggle details on click -->
		<script th:inline="javascript">
			$(document).ready(function () {
				$('.clickable-area').click(function () {
					const index = $(this).data('index');
					$('#sublist' + index).toggle();
					$(this).parent().toggleClass('expanded');
				});
			});
		</script>

		 <script th:inline="javascript">
        const emailId = /*[[${response.email}]]*/ null;

        if (emailId) {
            // Display the track menu by showing the hidden div
            const trackMenu = document.getElementById('trackMenu');
            trackMenu.style.display = 'block';
            // Set the emailId in the span element inside the track menu
            const emailSpan = document.getElementById('emailSpan');
            if (emailSpan) {
                emailSpan.textContent = emailId;
            }
        }
    </script></body>

</html>